schemaname,tablename,policyname,permissive,roles,cmd,qual,with_check
public,robots,Users can view their own robots,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),null
public,robots,Users can create their own robots,PERMISSIVE,{public},INSERT,null,(auth.uid() = user_id)
public,robots,Users can update their own robots,PERMISSIVE,{public},UPDATE,(auth.uid() = user_id),null
public,robots,Users can delete their own robots,PERMISSIVE,{public},DELETE,(auth.uid() = user_id),null
public,telemetry,Users can insert telemetry for their own robots,PERMISSIVE,{public},INSERT,null,"(( SELECT robots.user_id
   FROM robots
  WHERE (robots.id = telemetry.robot_id)) = auth.uid())"
public,admin_users,Admins can add new admin users,PERMISSIVE,{public},INSERT,null,check_if_admin(auth.uid())
public,alerts,Users can update alerts for their own robots,PERMISSIVE,{public},UPDATE,"(( SELECT robots.user_id
   FROM robots
  WHERE (robots.id = alerts.robot_id)) = auth.uid())",null
public,subscriptions,Service role can insert subscriptions,PERMISSIVE,{public},INSERT,null,true
public,subscriptions,Service role can update subscriptions,PERMISSIVE,{public},UPDATE,true,null
public,admin_users,Admins can view admin users,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM admin_users admin_users_1
  WHERE (admin_users_1.id = auth.uid())))",null
public,admin_users,Allow all authenticated read,PERMISSIVE,{public},SELECT,(auth.role() = 'authenticated'::text),null
public,profiles,Users and admins can select profiles,PERMISSIVE,{public},SELECT,"((auth.uid() = id) OR (EXISTS ( SELECT 1
   FROM admin_users
  WHERE (admin_users.id = auth.uid()))))",null
public,admin_users,Users can check their own admin status,PERMISSIVE,{public},SELECT,(auth.uid() = id),null
public,profiles,Users can select their own profile,PERMISSIVE,{public},SELECT,(auth.uid() = id),null
public,admin_users,Allow all authenticated users to read admin_users,PERMISSIVE,{public},SELECT,(auth.role() = 'authenticated'::text),null
public,admin_users,Admins can see all admin users,PERMISSIVE,{public},SELECT,check_if_admin(auth.uid()),null
public,profiles,Users can view their own profile,PERMISSIVE,{public},SELECT,(auth.uid() = id),null
public,profiles,Users can update their own profile,PERMISSIVE,{public},UPDATE,(auth.uid() = id),null
public,profiles,Admins can view all profiles,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM admin_users
  WHERE (admin_users.id = auth.uid())))",null
public,profiles,Admins can update all profiles,PERMISSIVE,{public},UPDATE,"(EXISTS ( SELECT 1
   FROM admin_users
  WHERE (admin_users.id = auth.uid())))",null
public,robots,Users can manage their own robots,PERMISSIVE,{public},ALL,(auth.uid() = user_id),null
public,robots,Admins can manage all robots,PERMISSIVE,{public},ALL,"(EXISTS ( SELECT 1
   FROM admin_users
  WHERE (admin_users.id = auth.uid())))",null
public,alerts,Users can view alerts for their own robots,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM robots
  WHERE ((robots.id = alerts.robot_id) AND (robots.user_id = auth.uid()))))",null
public,alerts,Admins can view all alerts,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM admin_users
  WHERE (admin_users.id = auth.uid())))",null
public,subscriptions,Users can view their own subscriptions,PERMISSIVE,{public},SELECT,(auth.uid() = user_id),null
public,subscriptions,Admins can view all subscriptions,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM admin_users
  WHERE (admin_users.id = auth.uid())))",null
public,telemetry,Users can view telemetry for their own robots,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM robots
  WHERE ((robots.id = telemetry.robot_id) AND (robots.user_id = auth.uid()))))",null
public,telemetry,Admins can view all telemetry,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM admin_users
  WHERE (admin_users.id = auth.uid())))",null
public,plan_limits,Anyone can read plan limits,PERMISSIVE,{public},SELECT,true,null
public,admin_users,Admins can view their own admin_users row,PERMISSIVE,{public},SELECT,(id = auth.uid()),null